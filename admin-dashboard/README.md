# 360¬∞ –†–ê–ë–û–¢–ê - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã 360¬∞ –†–ê–ë–û–¢–ê.

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è:
- –ú–æ–¥–µ—Ä–∞—Ü–∏–∏ –≤–∏–¥–µ–æ-–≤–∞–∫–∞–Ω—Å–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –∂–∞–ª–æ–±
- –ü—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Framework:** Next.js 14 (App Router)
- **Language:** TypeScript
- **Styling:** Tailwind CSS
- **UI Components:** Radix UI
- **Charts:** Recharts
- **Forms:** React Hook Form + Zod
- **Authentication:** JWT (jose)

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä
npm run dev

# –û—Ç–∫—Ä—ã—Ç—å http://localhost:3001
```

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
admin-dashboard/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login/page.tsx          # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/page.tsx      # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ moderation/page.tsx     # –ú–æ–¥–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users/page.tsx          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ complaints/page.tsx     # –ñ–∞–ª–æ–±—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ analytics/page.tsx      # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/                  # Admin API routes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ video/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ track-view/route.ts # 2-view limit API
‚îÇ   ‚îú‚îÄ‚îÄ globals.css
‚îÇ   ‚îî‚îÄ‚îÄ layout.tsx
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ui/                         # UI components
‚îÇ   ‚îî‚îÄ‚îÄ ResumeVideoPlayer.tsx      # Video player —Å 2-view limit
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts
‚îî‚îÄ‚îÄ package.json
```

## üìÑ –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (`/admin/login`)

**–î–æ—Å—Ç—É–ø:** Email + Password

**–†–æ–ª–∏:**
- `admin` - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
- `moderator` - –¥–æ—Å—Ç—É–ø –∫ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- Email –∏ –ø–∞—Ä–æ–ª—å
- JWT —Ç–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –≤ localStorage
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ dashboard

**TODO:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `admins` –≤ –ë–î
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API endpoint `/api/admin/auth/login`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)
- [ ] –î–æ–±–∞–≤–∏—Ç—å JWT –≥–µ–Ω–µ—Ä–∞—Ü–∏—é

### 2. Dashboard (`/admin/dashboard`)

**–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:**
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
  - –í—Å–µ–≥–æ –≤–∞–∫–∞–Ω—Å–∏–π (+ –Ω–æ–≤—ã—Ö —Å–µ–≥–æ–¥–Ω—è)
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (+ –Ω–æ–≤—ã—Ö —Å–µ–≥–æ–¥–Ω—è)
  - –í–∞–∫–∞–Ω—Å–∏–π –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (‚ö†Ô∏è)
  - –ù–µ—Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö –∂–∞–ª–æ–± (üî¥)
- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
  - –ü–µ—Ä–µ–π—Ç–∏ –∫ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
  - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∂–∞–ª–æ–±—ã
- –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

**TODO:**
- [ ] –°–æ–∑–¥–∞—Ç—å API endpoint `/api/admin/stats`
- [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫ —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ (Recharts)

### 3. –ú–æ–¥–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ-–≤–∞–∫–∞–Ω—Å–∏–π (`/admin/moderation`)

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è!**

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤–∏–¥–µ–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –ø–ª–µ–µ—Ä–æ–º
- AI –ø—Ä–æ–≤–µ—Ä–∫–∞ (–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∫–∞—á–µ—Å—Ç–≤–æ, –∫–æ–Ω—Ç–µ–Ω—Ç)
- –§–∏–ª—å—Ç—Ä—ã: –û–∂–∏–¥–∞—é—Ç / –û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ / –û—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã–µ
- –î–µ–π—Å—Ç–≤–∏—è:
  - ‚úÖ –û–¥–æ–±—Ä–∏—Ç—å –≤–∞–∫–∞–Ω—Å–∏—é
  - ‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å —Å –ø—Ä–∏—á–∏–Ω–æ–π
  - ‚è© –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å

**–ü—Ä–∏—á–∏–Ω—ã –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è:**
1. –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ–ø–∏—Å–∞–Ω–∏—é
2. –ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ
3. –ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∑–≤—É–∫–∞
4. –ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
5. –°–ø–∞–º/–º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ
6. –î—Ä—É–≥–æ–µ (—Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º)

**API Endpoints:**
```
GET  /api/admin/moderation?status=pending
POST /api/admin/moderation/approve
POST /api/admin/moderation/reject
```

**TODO:**
- [ ] –°–æ–∑–¥–∞—Ç—å API endpoints
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å VideoProcessingService –∏–∑ backend
- [ ] –î–æ–±–∞–≤–∏—Ç—å push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—é
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞

### 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (`/admin/users`)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏/—Ç–µ–ª–µ—Ñ–æ–Ω—É/email
- –§–∏–ª—å—Ç—Ä—ã:
  - –í—Å–µ
  - –°–æ–∏—Å–∫–∞—Ç–µ–ª–∏
  - –†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–∏
  - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å –ø—Ä–∏—á–∏–Ω–æ–π
- –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**TODO:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `/admin/users/page.tsx`
- [ ] –°–æ–∑–¥–∞—Ç—å API endpoint `/api/admin/users`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

### 5. –ñ–∞–ª–æ–±—ã (`/admin/complaints`)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –°–ø–∏—Å–æ–∫ –∂–∞–ª–æ–± —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:
  - –ù–æ–≤—ã–µ
  - –í —Ä–∞–±–æ—Ç–µ
  - –†–µ—à—ë–Ω–Ω—ã–µ
- –î–µ—Ç–∞–ª–∏ –∂–∞–ª–æ–±—ã:
  - –ö—Ç–æ –ø–æ–∂–∞–ª–æ–≤–∞–ª—Å—è
  - –ù–∞ –∫–æ–≥–æ
  - –ü—Ä–∏—á–∏–Ω–∞
  - –û–ø–∏—Å–∞–Ω–∏–µ
  - –ü—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (–≤–∏–¥–µ–æ, —Å–∫—Ä–∏–Ω—à–æ—Ç—ã)
- –î–µ–π—Å—Ç–≤–∏—è:
  - –°–Ω—è—Ç—å –∂–∞–ª–æ–±—É (–Ω–µ–æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è)
  - –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∂–∞–ª–æ–±—É

**TODO:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `/admin/complaints/page.tsx`
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `complaints` –≤ –ë–î
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API endpoints
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 6. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (`/admin/analytics`)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ì—Ä–∞—Ñ–∏–∫–∏:
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ü—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤–∞–∫–∞–Ω—Å–∏–π
  - –û—Ç–∫–ª–∏–∫–∏
  - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º/–Ω–µ–¥–µ–ª—è–º/–º–µ—Å—è—Ü–∞–º
- –ú–µ—Ç—Ä–∏–∫–∏:
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–≤—Å–µ–≥–æ, –Ω–æ–≤—ã—Ö, —Å–æ–∏—Å–∫–∞—Ç–µ–ª–µ–π, —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π)
  - –í–∞–∫–∞–Ω—Å–∏–∏ (–≤—Å–µ–≥–æ, –Ω–æ–≤—ã—Ö, –∞–∫—Ç–∏–≤–Ω—ã—Ö, –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏)
  - –û—Ç–∫–ª–∏–∫–∏ (–≤—Å–µ–≥–æ, –Ω–æ–≤—ã—Ö, —Å –≤–∏–¥–µ–æ, –±–µ–∑ –≤–∏–¥–µ–æ)
  - –ú–æ–¥–µ—Ä–∞—Ü–∏—è (—Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è, –æ–¥–æ–±—Ä–µ–Ω–æ, –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ)
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV/Excel

**TODO:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `/admin/analytics/page.tsx`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Recharts
- [ ] –°–æ–∑–¥–∞—Ç—å API endpoint `/api/admin/analytics`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

## üîí 2-View Limit (–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –§–£–ù–ö–¶–ò–Ø)

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `ResumeVideoPlayer`

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–í–∏–¥–µ–æ-—Ä–µ–∑—é–º–µ —Å–æ–∏—Å–∫–∞—Ç–µ–ª—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–º **–º–∞–∫—Å–∏–º—É–º 2 —Ä–∞–∑–∞**. –ü–æ—Å–ª–µ 2 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –≤–∏–¥–µ–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è/–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
   - –ó–∞–ø—Ä–æ—Å –∫ API: `GET /api/video/track-view?videoId=X&applicationId=Y`
   - –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—á—ë—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (0, 1, –∏–ª–∏ 2)
   - –ï—Å–ª–∏ `viewCount >= 2` ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –∑–∞–º–æ–∫ üîí

2. **–ü—Ä–∏ –Ω–∞—á–∞–ª–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ:**
   - –ó–∞–ø—Ä–æ—Å –∫ API: `POST /api/video/track-view`
   - –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ –≤ –ë–î
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π `viewCount` –∏ `viewsRemaining`

3. **–ü–æ—Å–ª–µ 2-–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:**
   - –í–∏–¥–µ–æ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ —É–¥–∞–ª—ë–Ω–Ω–æ–µ –≤ –ë–î
   - Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–∏—Å–∫–∞—Ç–µ–ª—é: "–í–∞—à–µ –≤–∏–¥–µ–æ –±—ã–ª–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ 2 —Ä–∞–∑–∞"
   - –í–∏–¥–µ–æ –±–æ–ª—å—à–µ –Ω–µ–ª—å–∑—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**

```sql
-- –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
CREATE TABLE video_views (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  video_id UUID NOT NULL REFERENCES videos(id),
  user_id UUID NOT NULL REFERENCES users(id),
  application_id UUID NOT NULL REFERENCES applications(id),
  viewed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –ò–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–¥—Å—á—ë—Ç–∞
CREATE INDEX idx_video_views_user ON video_views(video_id, user_id);

-- –¢—Ä–∏–≥–≥–µ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏–º–∏—Ç–∞
CREATE OR REPLACE FUNCTION check_video_view_limit()
RETURNS TRIGGER AS $$
BEGIN
  IF (SELECT COUNT(*) FROM video_views
      WHERE video_id = NEW.video_id
      AND user_id = NEW.user_id) >= 2 THEN
    RAISE EXCEPTION 'View limit reached';
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER enforce_video_view_limit
BEFORE INSERT ON video_views
FOR EACH ROW
EXECUTE FUNCTION check_video_view_limit();

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ –ø–æ—Å–ª–µ 2 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
CREATE OR REPLACE FUNCTION delete_video_after_views()
RETURNS TRIGGER AS $$
BEGIN
  IF (SELECT COUNT(*) FROM video_views
      WHERE video_id = NEW.video_id) >= 2 THEN
    UPDATE videos
    SET deleted_at = NOW(),
        deletion_reason = 'view_limit_reached'
    WHERE id = NEW.video_id;
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER auto_delete_video
AFTER INSERT ON video_views
FOR EACH ROW
EXECUTE FUNCTION delete_video_after_views();
```

**API Endpoints:**

```typescript
// GET /api/video/track-view?videoId=X&applicationId=Y
{
  videoId: string,
  applicationId: string,
  viewCount: number,       // 0, 1, or 2
  viewsRemaining: number,  // 2, 1, or 0
  isLocked: boolean        // true if viewCount >= 2
}

// POST /api/video/track-view
Body: {
  videoId: string,
  applicationId: string
}

Response: {
  success: boolean,
  viewCount: number,
  viewsRemaining: number,
  isLocked: boolean,
  message: string
}

// Error: 403 if view limit reached
{
  error: "View limit reached. This video can only be viewed 2 times."
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**

```tsx
import ResumeVideoPlayer from '@/components/ResumeVideoPlayer';

<ResumeVideoPlayer
  videoId="uuid-here"
  applicationId="uuid-here"
  onViewLimitReached={() => {
    alert('–í–∏–¥–µ–æ –±–æ–ª—å—à–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ');
  }}
/>
```

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### JWT Authentication

**–ü—Ä–æ—Ü–µ—Å—Å:**

1. **Login:**
   ```
   POST /api/admin/auth/login
   Body: { email, password }
   Response: { token: "jwt-token-here" }
   ```

2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:**
   ```javascript
   localStorage.setItem('adminToken', token);
   ```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:**
   ```javascript
   fetch('/api/admin/stats', {
     headers: {
       'Authorization': `Bearer ${token}`
     }
   });
   ```

4. **Middleware –¥–ª—è –∑–∞—â–∏—Ç—ã routes:**
   ```typescript
   // middleware.ts
   export function middleware(request: NextRequest) {
     const token = request.cookies.get('adminToken');
     if (!token && request.nextUrl.pathname.startsWith('/admin')) {
       return NextResponse.redirect(new URL('/admin/login', request.url));
     }
   }
   ```

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã

```sql
-- –ê–¥–º–∏–Ω—ã
CREATE TABLE admins (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email TEXT UNIQUE NOT NULL,
  password_hash TEXT NOT NULL,
  role TEXT NOT NULL CHECK (role IN ('admin', 'moderator')),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–æ–≤
CREATE TABLE admin_actions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  admin_id UUID REFERENCES admins(id),
  action_type TEXT NOT NULL,
  target_type TEXT NOT NULL,
  target_id UUID NOT NULL,
  comment TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –ñ–∞–ª–æ–±—ã
CREATE TABLE complaints (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  reporter_id UUID REFERENCES users(id),
  reported_user_id UUID REFERENCES users(id),
  reason TEXT NOT NULL,
  description TEXT,
  status TEXT DEFAULT 'new' CHECK (status IN ('new', 'in_progress', 'resolved', 'rejected')),
  resolved_by UUID REFERENCES admins(id),
  resolution TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  resolved_at TIMESTAMP
);

-- –ü—Ä–æ—Å–º–æ—Ç—Ä—ã –≤–∏–¥–µ–æ (–¥–ª—è 2-view limit)
CREATE TABLE video_views (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  video_id UUID NOT NULL REFERENCES videos(id),
  user_id UUID NOT NULL REFERENCES users(id),
  application_id UUID NOT NULL REFERENCES applications(id),
  viewed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## üöÄ Deployment

### Production Build

```bash
npm run build
npm start
```

### Environment Variables

–°–æ–∑–¥–∞—Ç—å `.env.local`:

```env
# Database
DATABASE_URL=postgresql://user:password@localhost:5432/360rabota

# JWT
JWT_SECRET=your-super-secret-jwt-key-here

# Backend API
BACKEND_API_URL=http://localhost:5000

# OneSignal (–¥–ª—è push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
ONESIGNAL_APP_ID=your-app-id
ONESIGNAL_API_KEY=your-api-key
```

### Vercel Deployment

```bash
vercel deploy
```

## üìù TODO List

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–µ (Priority 1)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–µ API endpoints
- [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫ PostgreSQL
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å JWT authentication
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î (admins, complaints, video_views)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º backend (ChatService, VideoProcessingService)

### –í–∞–∂–Ω–æ–µ (Priority 2)
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã Users –∏ Complaints
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–∞ Analytics —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–æ–≤

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (Priority 3)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD
- [ ] –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å (en/ru)

## ü§ù –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Backend

–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã –∏–∑ `backend/`:

- **VideoProcessingService** - –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ
- **NotificationService** - –¥–ª—è push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **ChatService** - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–∞—Ç–∞–º–∏
- **AnalyticsService** - –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

–í—Å–µ API calls –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ `http://localhost:5000/api` (backend Express server).

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Next.js Documentation](https://nextjs.org/docs)
- [Tailwind CSS](https://tailwindcss.com/docs)
- [Radix UI](https://www.radix-ui.com/)
- [Recharts](https://recharts.org/)
- [React Hook Form](https://react-hook-form.com/)

## üêõ Troubleshooting

**Problem:** `Module not found: Can't resolve '@/components/ui/button'`
**Solution:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–ª–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ `web-dashboard`

**Problem:** API calls –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç CORS error
**Solution:** –î–æ–±–∞–≤–∏—Ç—å –≤ backend CORS middleware:
```javascript
app.use(cors({
  origin: 'http://localhost:3001',
  credentials: true
}));
```

---

**Version:** 1.0.0
**Last Updated:** 2025-11-06
**Maintained by:** 360¬∞ –†–ê–ë–û–¢–ê Development Team
